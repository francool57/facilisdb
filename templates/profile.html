<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - FacilisDB</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="shortcut icon" href="{{ url_for('static', filename='database-512.png') }}">
</head>


<body>
    <header>
        <img src="{{ url_for('static', filename='database-512.png') }}" alt="FacilisDB Logo" class="logonav">
        <h1>Profile</h1>
    </header>
    <div class="main-container">
        <nav class="sidebar">
            <ul class="sidebar-top">
                <li><a href="/"><i class="fas fa-home icon"></i><span class="full-text">Home</span></a></li>
                <li><a href="/create_table"><i class="fas fa-plus-square icon"></i><span class="full-text">Create Table</span></a></li>
                <li><a href="/update_table"><i class="fas fa-edit icon"></i><span class="full-text">Update Table</span></a></li>
                <li><a href="/custom_query"><i class="fas fa-code icon"></i><span class="full-text">Custom Query</span></a></li>
                <li><a href="/custom_charts"><i class="fas fa-chart-bar icon"></i><span class="full-text">Custom Charts</span></a></li>
            </ul>
            <ul class="sidebar-bottom"> 
                <li><a href="/profile"><i class="fas fa-user icon"></i><span class="full-text">Profile</span></a></li>
                <li><a href="/logout"><i class="fas fa-sign-out-alt icon"></i><span class="full-text">Logout</span></a></li>
            </ul>
        </nav>
        <div class="content">
            <main class="fade-in">
                <div class="profile-container">
                    <div class="profile-item">  
                    <form class="profile-info" method="POST" action="{{ url_for('profile') }}">
                        <button type="submit" id="save-changes-btn" class="save-btn">Save</button>
                        <label class="ww" for="chart-name">User Info</label>
                        <label for="username">Username:</label>
                        <input type="text" id="username" name="username" value="{{ user[1] }}" placeholder="{{ user[1] }}">

                        <label for="email" class="email-label">Email:</label>
                        <input type="text" id="email" name="email" placeholder="{{ user[3] }}" readonly>
                        
                    </form>

                    <script>
                        document.getElementById('save-changes-btn').addEventListener('click', function(event) {
                            event.preventDefault();
                            const newUsername = document.getElementById('username').value;
                            if (newUsername !== "{{ user[1] }}") {
                                const confirmation = confirm("Are you sure you want to change your username?");
                                if (confirmation) {
                                    // Add AJAX call or form submission logic here to update the username
                                    alert("Username changed to: " + newUsername);
                                    this.form.submit();
                                }
                            } else {
                                alert("No changes were made to the username.");
                            }
                        });
                        document.getElementById('email').addEventListener('dblclick', function() {
                            alert("Contact costumer support to change the current email");
                        });
                    </script>
                    </div>
                </div>
            </main>

        </div>
    </div>
    <footer>
        <p>&copy; 2024 FacilisDB</p>
    </footer>
</body>
</html>